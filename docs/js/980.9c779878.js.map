{"version":3,"file":"js/980.9c779878.js","mappings":"kKAeO,MAAMA,EACTC,WAAAA,CAAYC,EAAIC,EAAQC,EAAOC,EAAQC,EAAaC,EAAMC,EAAQ,IAC9DC,KAAKP,GAAKA,EACVO,KAAKN,OAASA,EACdM,KAAKL,MAAQA,EACbK,KAAKJ,OAASA,EACdI,KAAKH,YAAcA,EACnBG,KAAKF,KAAOA,EACZE,KAAKD,MAAQA,CACjB,CAEAE,KAAAA,GACI,MAAO,CACHC,QAAQ,EACRT,GAAIO,KAAKP,GACTC,OAAQM,KAAKN,OACbC,MAAOK,KAAKL,MACZC,OAAQI,KAAKJ,OACbC,YAAaG,KAAKH,YAClBC,KAAME,KAAKF,KACXC,MAAOC,KAAKD,MAEpB,EAiBG,MAAMI,EACTX,WAAAA,CAAYY,EAAMC,EAAU,GAAIC,EAAe,IAC3CN,KAAKI,KAAOA,EACZJ,KAAKK,QAAUA,EACfL,KAAKM,aAAeA,CACxB,CAEAL,KAAAA,GACI,MAAO,CACHG,KAAMJ,KAAKI,KACXC,QAASL,KAAKK,QACdC,aAAcN,KAAKM,aAE3B,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CChDJC,EAAAA,EAAAA,IAAgBH,EAAMI,EAAS,OCT/B,MAAMC,EAAiB,CACrBC,YAAQC,EACRC,WAAY,gCACZC,UAAW,gBACXC,cAAe,oCACfC,kBAAmB,aACnBC,MAAO,0CACPC,cAAe,gBAIXC,GAAMC,EAAAA,EAAAA,IAAcV,GACpBW,GAAKC,EAAAA,EAAAA,IAAaH,GACxB,O,6NC+EA,MAAMI,GAAUC,EAAAA,EAAAA,IAAI,MACdC,GAAeD,EAAAA,EAAAA,IAAI,MACnBE,GAAYC,EAAAA,EAAAA,IAAO,cAEzBC,EAAAA,EAAAA,KAAUC,UACRH,EAAUI,OAAQ,QACZC,EAAAA,EACHC,aACAC,MAAMH,IACLI,QAAQC,IAAIL,EAAMM,aAClBb,EAAQO,MAAQA,CAAK,IAEtBO,SAAQ,KACPX,EAAUI,OAAQ,EAClBQ,eAAeC,QAAQ,KAAMhB,EAAQO,MAAMU,QAC3CF,eAAeC,QAAQ,cAAehB,EAAQO,MAAMM,YAAY,GAChE,IAGN,MAAMK,GAASC,EAAAA,EAAAA,MAETC,EAAYd,UAChBH,EAAUI,OAAQ,EAClB,IACE,MAAMc,GAASC,EAAAA,EAAAA,IAAIxB,EAAAA,EAAI,aAAcE,EAAQO,MAAMU,QAC7CM,QAAgBC,EAAAA,EAAAA,IAAOH,GACvBI,EAAMC,OAAOC,aACnBzB,EAAaK,MAAQ,IAAI1B,EAAAA,GAAU,GAAGmB,EAAQO,MAAMM,kBAEhDU,EAAQK,eACJC,EAAAA,EAAAA,IAAUR,EAAQ,CACtB,CAAC,GAAGI,KAAQvB,EAAaK,MAAM5B,gBAK3BmD,EAAAA,EAAAA,IAAOT,EAAQ,CACnB,CAAC,GAAGI,KAAQvB,EAAaK,MAAM5B,UAE9B+B,MAAK,IAAMC,QAAQC,IAAI,6BACvBmB,OAAOC,GAAQrB,QAAQsB,MAAM,qBAAsBD,KAExD9B,EAAaK,MAAQ,IAAKL,EAAaK,MAAOpC,GAAIsD,GAClDV,eAAeC,QAAQ,eAAgBkB,KAAKC,UAAUjC,EAAaK,QACnEW,EAAOkB,KAAK,CAAEC,KAAM,UACtB,CAAE,MAAOL,GACPM,MAAMN,EAAM,UACZ7B,EAAUI,OAAQ,CACpB,GAGIgC,EAAcjC,UAClBH,EAAUI,OAAQ,EAElBW,EAAOkB,KAAK,CAAEC,KAAM,YAAa,E,0VCtJnC,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://split/./src/Models/SplitModels.js","webpack://split/../../index.ts","webpack://split/./src/firebase/config.js","webpack://split/./src/components/HomeComponents.vue","webpack://split/./src/components/HomeComponents.vue?ad8f"],"sourcesContent":["// models.js\r\nexport class Member {\r\n    constructor(userid, name) {\r\n        this.userid = userid;\r\n        this.name = name;\r\n    }\r\n\r\n    toMap() {\r\n        return {\r\n            userid: this.userid,\r\n            name: this.name\r\n        };\r\n    }\r\n}\r\n\r\nexport class Transaction {\r\n    constructor(id, userid, payer, amount, description, date, split = []) {\r\n        this.id = id;\r\n        this.userid = userid;\r\n        this.payer = payer;\r\n        this.amount = amount;\r\n        this.description = description;\r\n        this.date = date;\r\n        this.split = split;\r\n    }\r\n\r\n    toMap() {\r\n        return {\r\n            isLock: false,\r\n            id: this.id,\r\n            userid: this.userid,\r\n            payer: this.payer,\r\n            amount: this.amount,\r\n            description: this.description,\r\n            date: this.date,\r\n            split: this.split\r\n        };\r\n    }\r\n}\r\n\r\nexport class Split {\r\n    constructor(userid = \"\", share = 0) {\r\n        this.userid = userid;\r\n        this.share = share;\r\n    }\r\n\r\n    toMap() {\r\n        return {\r\n            userid: this.userid,\r\n            share: this.share,\r\n        };\r\n    }\r\n}\r\n\r\nexport class SplitData {\r\n    constructor(name, members = [], transactions = []) {\r\n        this.name = name;\r\n        this.members = members;\r\n        this.transactions = transactions;\r\n    }\r\n\r\n    toMap() {\r\n        return {\r\n            name: this.name,\r\n            members: this.members,\r\n            transactions: this.transactions\r\n        };\r\n    }\r\n}\r\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","// Import the functions you need from the SDKs you need\r\n\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { initializeApp } from \"firebase/app\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: import.meta.FIREBASEKEY,\r\n  authDomain: \"vuetest-35344.firebaseapp.com\",\r\n  projectId: \"vuetest-35344\",\r\n  storageBucket: \"vuetest-35344.firebasestorage.app\",\r\n  messagingSenderId: \"2844207119\",\r\n  appId: \"1:2844207119:web:687837aeece2bf9eea5b7a\",\r\n  measurementId: \"G-42LZ3K97KN\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nexport default db","<!-- <template>\r\n  <div>\r\n    <button class=\"btn btn-success\" @click=\"handleAction('CreateGroup')\">\r\n      建立群組\r\n    </button>\r\n    <button class=\"btn btn-success\" @click=\"handleAction('addMember')\">\r\n      新增成員\r\n    </button>\r\n    <button class=\"btn btn-success\" @click=\"handleAction('addTransaction')\">\r\n      新增交易\r\n    </button>\r\n    <button class=\"btn btn-success\" @click=\"handleAction('addSplit')\">\r\n      新增分割\r\n    </button>\r\n    <div>\r\n      <textarea v-model=\"jdata\" style=\"height: 500px; width: 50vw\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport db from \"../src/firebase/config\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\nimport { Member, SplitData, Transaction } from \"../src/Models/SplitModels\";\r\nconst splitallData = ref(null);\r\nconst jdata = ref(\"\");\r\nconst docRef = doc(db, \"241229Test\", \"Robert\");\r\n\r\nconst handleAction = (action) => {\r\n  switch (action) {\r\n    case \"CreateGroup\":\r\n      splitallData.value = new SplitData(generateGUID(), \"Robert Groups\");\r\n      break;\r\n    case \"addMember\":\r\n      splitallData.value.members.push(new Member(generateGUID(), \"New Member\"));\r\n      break;\r\n    case \"addTransaction\":\r\n      splitallData.value.transactions.push(\r\n        new Transaction(\r\n          generateGUID(),\r\n          \"132\",\r\n          100,\r\n          \"Example\",\r\n          new Date().toISOString()\r\n        )\r\n      );\r\n      break;\r\n    case \"addSplit\":\r\n      splitallData.value.transactions[0].split.push(\r\n        new Member(generateGUID(), 1000)\r\n      );\r\n      break;\r\n    default:\r\n      console.error(\"Unknown action:\", action);\r\n      return;\r\n  }\r\n\r\n  updateData();\r\n};\r\n\r\nconst updateData = () => {\r\n  console.log;\r\n  jdata.value = JSON.stringify(splitallData.value);\r\n  setDoc(docRef, { splitallData: jdata.value })\r\n    .then(() => console.log(\"Data saved successfully\"))\r\n    .catch((err) => console.error(\"Error saving data:\", err));\r\n};\r\n\r\nconst generateGUID = () => {\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\r\n    const r = (Math.random() * 16) | 0;\r\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\r\n  });\r\n};\r\n</script>\r\n\r\n<style></style> -->\r\n\r\n<template>\r\n  <div class=\"home-container\">\r\n    <h1>分帳輕鬆搞定</h1>\r\n    <p>快速紀錄與分帳，讓金錢計算更簡單。</p>\r\n    <div>\r\n      <button id=\"btnCreateNew\" class=\"btn btn-success\" @click=\"gotoGroup\">\r\n        建立新分帳\r\n      </button>\r\n      <button id=\"btnShowHis\" class=\"btn btn-success\" @click=\"gotoHistory\">\r\n        檢視歷史紀錄\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { doc, setDoc, getDoc, updateDoc } from \"firebase/firestore\";\r\nimport { SplitData } from \"../Models/SplitModels\";\r\nimport db from \"../firebase/config\";\r\nimport liff from \"@line/liff\";\r\n\r\nconst profile = ref(null);\r\nconst splitallData = ref(null);\r\nconst isLoading = inject(\"isLoading\");\r\n\r\nonMounted(async () => {\r\n  isLoading.value = true;\r\n  await liff\r\n    .getProfile()\r\n    .then((value) => {\r\n      console.log(value.displayName);\r\n      profile.value = value;\r\n    })\r\n    .finally(() => {\r\n      isLoading.value = false;\r\n      sessionStorage.setItem(\"id\", profile.value.userId);\r\n      sessionStorage.setItem(\"displayName\", profile.value.displayName);\r\n    });\r\n});\r\n\r\nconst router = useRouter();\r\n\r\nconst gotoGroup = async () => {\r\n  isLoading.value = true;\r\n  try {\r\n    const docRef = doc(db, \"241229Test\", profile.value.userId);\r\n    const docSnap = await getDoc(docRef);\r\n    const RID = crypto.randomUUID();\r\n    splitallData.value = new SplitData(`${profile.value.displayName}的群組`);\r\n    //已經存在這個文件\r\n    if (docSnap.exists()) {\r\n      await updateDoc(docRef, {\r\n        [`${RID}`]: splitallData.value.toMap(),\r\n      });\r\n    }\r\n    //否則新增文件並新增群組\r\n    else {\r\n      await setDoc(docRef, {\r\n        [`${RID}`]: splitallData.value.toMap(),\r\n      })\r\n        .then(() => console.log(\"Data saved successfully\"))\r\n        .catch((err) => console.error(\"Error saving data:\", err));\r\n    }\r\n    splitallData.value = { ...splitallData.value, id: RID };\r\n    sessionStorage.setItem(\"currentGroup\", JSON.stringify(splitallData.value));\r\n    router.push({ path: \"/group\" });\r\n  } catch (err) {\r\n    alert(err + \"新增資料失敗\");\r\n    isLoading.value = false;\r\n  }\r\n};\r\n\r\nconst gotoHistory = async () => {\r\n  isLoading.value = true;\r\n\r\n  router.push({ path: \"/history\" });\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nh1,\r\nspan,\r\na,\r\np {\r\n  color: white;\r\n  margin: 0 0 10px 0;\r\n}\r\n\r\nbutton {\r\n  margin: 10px;\r\n}\r\n\r\n.home-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#btnShowHis {\r\n  background: white;\r\n  border: white;\r\n  color: #2894ff;\r\n}\r\n\r\n#btnCreateNew {\r\n  background: #f75000;\r\n  border: white;\r\n  color: white;\r\n}\r\n\r\n@media screen and (max-width: 700px) {\r\n  .body {\r\n    display: block;\r\n    height: 100vh;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./HomeComponents.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomeComponents.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomeComponents.vue?vue&type=style&index=0&id=3fd6888e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3fd6888e\"]])\n\nexport default __exports__"],"names":["Transaction","constructor","id","userid","payer","amount","description","date","split","this","toMap","isLock","SplitData","name","members","transactions","registerVersion","version","firebaseConfig","apiKey","import","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","db","getFirestore","profile","ref","splitallData","isLoading","inject","onMounted","async","value","liff","getProfile","then","console","log","displayName","finally","sessionStorage","setItem","userId","router","useRouter","gotoGroup","docRef","doc","docSnap","getDoc","RID","crypto","randomUUID","exists","updateDoc","setDoc","catch","err","error","JSON","stringify","push","path","alert","gotoHistory","__exports__"],"sourceRoot":""}